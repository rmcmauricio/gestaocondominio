<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>{{ page.titulo }}</title>
    <meta name="description" content="{{ page.description }}">
    <meta name="keywords" content="{{ page.keywords }}">

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="{{ BASE_URL }}assets/images/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{{ BASE_URL }}assets/images/favicon.svg" />
    <link rel="shortcut icon" href="{{ BASE_URL }}assets/images/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="{{ BASE_URL }}assets/images/apple-touch-icon.png" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Bootstrap Override CSS (custom colors) -->
    <link href="{{ BASE_URL }}assets/css/bootstrap-override.css?v={{ VERSION }}" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{{ BASE_URL }}assets/css/main.css?v={{ VERSION }}" rel="stylesheet">
    <link href="{{ BASE_URL }}assets/css/homepage.css?v={{ VERSION }}" rel="stylesheet">
    <link href="{{ BASE_URL }}assets/css/help.css?v={{ VERSION }}" rel="stylesheet">
</head>
<body>
    {% include 'blocks/header.html.twig' %}

    <div class="main-wrapper">
        {% if user %}
            {% include 'blocks/sidebar.html.twig' %}
            <!-- Overlay when sidebar is open -->
            <div class="sidebar-overlay" onclick="toggleSidebar(); return false;"></div>
        {% endif %}

        <main class="main-content {% if viewName == 'pages/home.html.twig' or 'pages/legal/' in viewName or viewName == 'pages/help/index.html.twig' %}main-content-full{% endif %}">
            {% if demo_banner_message %}
            <div class="alert alert-warning alert-dismissible fade show mb-0" role="alert" style="border-radius: 0; border-left: 4px solid #ffc107;">
                <div class="container">
                    <i class="bi bi-info-circle"></i> <strong>Conta Demo:</strong> {{ demo_banner_message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            </div>
            {% endif %}
            {% include viewName %}
        </main>
    </div>

    {% include 'blocks/footer.html.twig' %}

    <!-- Help Modal (available on all pages) -->
    {% include 'blocks/help-modal.html.twig' %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="{{ BASE_URL }}assets/js/main.js?v={{ VERSION }}"></script>
    <script>
        // Define BASE_URL for help.js
        if (typeof window.BASE_URL === 'undefined') {
            window.BASE_URL = '{{ BASE_URL }}';
        }
    </script>
    <script src="{{ BASE_URL }}assets/js/help.js?v={{ VERSION }}"></script>
    {% if viewName == 'pages/dashboard/condomino.html.twig' %}
    <script src="{{ BASE_URL }}assets/js/dashboard-votes.js?v={{ VERSION }}"></script>
    <script src="{{ BASE_URL }}assets/js/dashboard-notifications.js?v={{ VERSION }}"></script>
    {% endif %}
</body>
</html>
