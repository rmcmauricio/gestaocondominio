<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-10">
                <div class="hero-badge-top">
                    <i class="bi bi-shield-lock"></i>
                    <span>A melhor solução para o seu condomínio</span>
                </div>
                <h1 class="hero-title">
                    <span class="title-part-1">Simplifique a gestão do</span>
                    <span class="title-part-2"> condomínio</span>
                </h1>
                <p class="hero-subtitle">
                    Automatize tarefas, melhore a comunicação entre moradores e administradores, e tenha controlo total das finanças do seu prédio.
                </p>
                
                <div class="hero-features-inline justify-content-center">
                    <div class="hero-feature-item">
                        <div class="hero-feature-icon">
                            <i class="bi bi-graph-up"></i>
                        </div>
                        <span class="hero-feature-text">Gestão financeira completa</span>
                    </div>
                    <div class="hero-feature-item">
                        <div class="hero-feature-icon">
                            <i class="bi bi-chat-dots"></i>
                        </div>
                        <span class="hero-feature-text">Comunicação eficiente</span>
                    </div>
                    <div class="hero-feature-item">
                        <div class="hero-feature-icon">
                            <i class="bi bi-calendar-check"></i>
                        </div>
                        <span class="hero-feature-text">Reservas online</span>
                    </div>
                </div>

                <div class="hero-buttons justify-content-center">
                    <a href="{{ BASE_URL }}register" class="btn-hero-primary">
                        <span>Começar Gratuitamente</span>
                        <i class="bi bi-arrow-right"></i>
                    </a>
                    <a href="{{ BASE_URL }}demo/access" class="btn-hero-secondary">
                        <span>Demonstração</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="absolute bottom-0 left-0 right-0" style="line-height: 0; margin: 0; padding: 0; border: none; outline: none; bottom: -1px;">
        <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-100 h-auto" preserveAspectRatio="none" style="width: 100%; height: auto; display: block; vertical-align: bottom; margin: 0; padding: 0; border: none; outline: none; overflow: visible;">
            <path d="M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1440V121H0V120Z" fill="white" stroke="none" style="shape-rendering: geometricPrecision;"></path>
        </svg>
    </div>
</section>

<!-- Features Section -->
<section id="funcionalidades" class="features-section">
    <div class="container">
        <div class="text-center mb-5">
            <div class="section-label">FUNCIONALIDADES</div>
            <h2 class="section-title">Tudo o que precisa para uma gestão eficiente</h2>
            <p class="section-description">Ferramentas completas para administradores e moradores</p>
        </div>

        <div class="features-grid">
            <div class="feature-card animate-fade-up" style="animation-delay: 0.1s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-calculator"></i>
                </div>
                <h5 class="feature-card-title">Gestão Financeira</h5>
                <p class="feature-card-description">Controle completo de receitas, despesas, orçamentos, contas bancárias e movimentos financeiros em um único lugar.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.2s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-receipt-cutoff"></i>
                </div>
                <h5 class="feature-card-title">Recibos Automáticos</h5>
                <p class="feature-card-description">Geração automática de recibos PDF quando as quotas são pagas, com histórico completo e organização por condomínio.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.3s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-calendar-month"></i>
                </div>
                <h5 class="feature-card-title">Quotas e Mapa de Quotas</h5>
                <p class="feature-card-description">Gestão automática de quotas mensais, quotas extras para obras ou eventos especiais, e visualização em mapa completo.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.4s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-chat-dots"></i>
                </div>
                <h5 class="feature-card-title">Mensagens com Editor HTML</h5>
                <p class="feature-card-description">Sistema completo de mensagens com editor HTML rico, respostas, anexos e notificações unificadas para comunicação eficiente.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.5s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-exclamation-triangle"></i>
                </div>
                <h5 class="feature-card-title">Ocorrências</h5>
                <p class="feature-card-description">Registe e acompanhe ocorrências com editor HTML, anexos, comentários e workflow completo de estados e prioridades.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.6s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-bell"></i>
                </div>
                <h5 class="feature-card-title">Notificações Unificadas</h5>
                <p class="feature-card-description">Sistema unificado que integra mensagens, ocorrências e eventos importantes do condomínio em um único local.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.7s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-calendar-check"></i>
                </div>
                <h5 class="feature-card-title">Reserva de Espaços</h5>
                <p class="feature-card-description">Sistema de agendamento online para salão de festas, churrasqueira e outros espaços comuns do condomínio.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.8s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-people"></i>
                </div>
                <h5 class="feature-card-title">Assembleias e Votações</h5>
                <p class="feature-card-description">Convocatórias automáticas, votações online, geração de atas e gestão completa de assembleias de condóminos.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.9s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-file-earmark-text"></i>
                </div>
                <h5 class="feature-card-title">Documentos Digitais</h5>
                <p class="feature-card-description">Armazene atas, convenção, regulamentos, contratos e documentos de forma segura, organizados por pasta.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.0s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-building"></i>
                </div>
                <h5 class="feature-card-title">Multi-Condomínios</h5>
                <p class="feature-card-description">Gerir múltiplos condomínios com condomínio padrão e alternância rápida entre eles através do menu lateral.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.1s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-bank"></i>
                </div>
                <h5 class="feature-card-title">Contas Bancárias</h5>
                <p class="feature-card-description">Gestão completa de contas bancárias e caixa, com controlo de saldos, movimentos e reconciliação financeira.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.2s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-truck"></i>
                </div>
                <h5 class="feature-card-title">Fornecedores</h5>
                <p class="feature-card-description">Registo e gestão de fornecedores, contratos, histórico de serviços e avaliações para melhor controlo.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.3s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-graph-up"></i>
                </div>
                <h5 class="feature-card-title">Relatórios Financeiros</h5>
                <p class="feature-card-description">Gere relatórios detalhados de receitas, despesas, balanços e análises financeiras para tomada de decisões.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.4s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-shield-check"></i>
                </div>
                <h5 class="feature-card-title">Segurança e Auditoria</h5>
                <p class="feature-card-description">Dados protegidos com medidas de segurança adequadas, hash seguro de passwords, proteção contra SQL injection, auditoria completa de pagamentos e conformidade com regulamentações.</p>
            </div>
        </div>
    </div>
</section>

<!-- Demo Section -->
<section id="demo" class="demo-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="demo-card">
                    <div class="demo-header">
                        <div class="demo-icon-wrapper">
                            <i class="bi bi-rocket-takeoff"></i>
                        </div>
                        <h2 class="demo-title">Experimente a Demo 100% Testável</h2>
                        <p class="demo-description">
                            Explore todas as funcionalidades da plataforma sem criar conta! Acesso instantâneo com dados pré-preenchidos para testar.
                        </p>
                    </div>

                    <div class="demo-stats">
                        <div class="demo-stat-item">
                            <div class="stat-icon">
                                <i class="bi bi-building"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number">10</div>
                                <div class="stat-label">Frações</div>
                                <div class="stat-subtitle">Dados realistas</div>
                            </div>
                        </div>
                        <div class="demo-stat-item">
                            <div class="stat-icon">
                                <i class="bi bi-bank"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number">2</div>
                                <div class="stat-label">Contas</div>
                                <div class="stat-subtitle">Bancárias + Caixa</div>
                            </div>
                        </div>
                        <div class="demo-stat-item">
                            <div class="stat-icon">
                                <i class="bi bi-calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number">{{ "now"|date("Y") }}</div>
                                <div class="stat-label">Ano Completo</div>
                                <div class="stat-subtitle">Dados atualizados</div>
                            </div>
                        </div>
                    </div>

                    <div class="demo-features">
                        <div class="demo-features-title">
                            <i class="bi bi-info-circle"></i>
                            <strong>O que pode testar:</strong>
                        </div>
                        <div class="demo-features-grid">
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Gestão financeira completa</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Recibos automáticos</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Quotas extras e mapa de quotas</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Assembleias com votações online</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Mensagens com editor HTML</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Ocorrências com editor HTML</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Notificações unificadas</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Reservas de espaços comuns</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Documentos e relatórios</span>
                            </div>
                        </div>
                    </div>

                    <div class="demo-cta">
                        <a href="{{ BASE_URL }}demo/access" class="btn-demo-primary">
                            <i class="bi bi-play-circle-fill"></i>
                            <span>Aceder à Demo Agora</span>
                        </a>
                        <p class="demo-note">
                            <i class="bi bi-shield-check"></i>
                            Login automático • Sem registo necessário • Dados resetados automaticamente
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section id="como-funciona" class="how-it-works-section">
    <div class="container">
        <div class="text-center mb-5">
            <div class="section-label">COMO FUNCIONA</div>
            <h2 class="section-title">Comece em 3 passos simples</h2>
            <p class="section-description">Configuração rápida e sem complicação</p>
        </div>

        <div class="steps-grid">
            <div class="step-card">
                <div class="step-icon">
                    <i class="bi bi-person-plus"></i>
                </div>
                <div class="step-number">Passo 01</div>
                <h5 class="step-title">Crie a sua conta</h5>
                <p class="step-description">Registe o seu condomínio em poucos minutos. É rápido e gratuito para começar.</p>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="bi bi-gear"></i>
                </div>
                <div class="step-number">Passo 02</div>
                <h5 class="step-title">Configure o seu prédio</h5>
                <p class="step-description">Adicione apartamentos, moradores e personalize as configurações do sistema.</p>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="bi bi-rocket-takeoff"></i>
                </div>
                <div class="step-number">Passo 03</div>
                <h5 class="step-title">Comece a usar</h5>
                <p class="step-description">Pronto! Gerencie finanças, comunicação e reservas de forma simples e eficiente.</p>
            </div>
        </div>
    </div>
</section>

<!-- Pricing Section -->
<section class="pricing-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Planos para todos os tamanhos</h2>
            <p class="section-description">Escolha o plano ideal para o seu condomínio</p>
        </div>
        
        <div class="row g-4 justify-content-center">
            {% for plan in plans %}
            {% set plan_promotion = plan_promotions[plan.id] ?? null %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-2 {% if plan.slug == 'pro' %}border-primary shadow{% elseif plan_promotion %}border-warning border-3 shadow-lg{% endif %}">
                    {% if plan.slug == 'pro' %}
                    <div class="card-header bg-primary text-white text-center py-3">
                        <span class="badge bg-white fw-bold mb-2 d-inline-block px-3 py-1" style="font-size: 0.9rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); color: #fd7e14 !important;">Mais Popular</span>
                        {% if plan_promotion %}
                        <div class="mt-2">
                            <span class="badge bg-danger text-white mb-2">
                                <i class="bi bi-fire"></i> PROMOÇÃO ATIVA
                            </span>
                            <div class="mt-2">
                                <strong>{{ plan_promotion.name }}</strong>
                                {% if plan_promotion.discount_type == 'percentage' %}
                                    <span class="badge bg-danger">{{ plan_promotion.discount_value }}% OFF</span>
                                {% else %}
                                    <span class="badge bg-danger">€{{ plan_promotion.discount_value }} OFF</span>
                                {% endif %}
                                {% if plan_promotion.duration_months %}
                                    <div class="mt-1">
                                        <small class="text-white-50">Válida por {{ plan_promotion.duration_months }} {% if plan_promotion.duration_months == 1 %}mês{% else %}meses{% endif %}</small>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    {% elseif plan_promotion %}
                    <div class="card-header bg-warning text-dark text-center py-3 position-relative">
                        <span class="badge bg-danger text-white mb-2">
                            <i class="bi bi-fire"></i> PROMOÇÃO ATIVA
                        </span>
                        <div class="mt-2">
                            <strong>{{ plan_promotion.name }}</strong>
                            {% if plan_promotion.discount_type == 'percentage' %}
                                <span class="badge bg-danger">{{ plan_promotion.discount_value }}% OFF</span>
                            {% else %}
                                <span class="badge bg-danger">€{{ plan_promotion.discount_value }} OFF</span>
                            {% endif %}
                            {% if plan_promotion.duration_months %}
                                <div class="mt-1">
                                    <small class="text-dark">Válida por {{ plan_promotion.duration_months }} {% if plan_promotion.duration_months == 1 %}mês{% else %}meses{% endif %}</small>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                    <div class="card-body text-center p-4">
                        <h3 class="fw-bold mb-3">{{ plan.name }}</h3>
                        <div class="mb-4">
                            {% if plan_promotion %}
                                {% set discount_amount = (plan_promotion.discount_type == 'percentage') ? (plan.price_monthly * plan_promotion.discount_value / 100) : plan_promotion.discount_value %}
                                {% set final_price = plan.price_monthly - discount_amount %}
                                <div>
                                    <span class="text-muted text-decoration-line-through" style="font-size: 1.5rem;">€{{ plan.price_monthly|number_format(2, ',', '.') }}</span>
                                    <span class="display-3 fw-bold text-danger">€{{ final_price|number_format(2, ',', '.') }}</span>
                                </div>
                            {% else %}
                                <span class="display-3 fw-bold">€{{ plan.price_monthly|number_format(2, ',', '.') }}</span>
                            {% endif %}
                            <span class="text-muted">/mês</span>
                        </div>
                        {% if plan.price_yearly %}
                        <p class="text-muted small mb-4">
                            ou €{{ plan.price_yearly|number_format(2, ',', '.') }}/ano<br>
                            <span class="text-success">Poupe {{ ((plan.price_monthly * 12 - plan.price_yearly) / (plan.price_monthly * 12) * 100)|round }}%</span>
                        </p>
                        {% endif %}
                        
                        <p class="text-muted mb-4">{{ plan.description }}</p>
                        
                        <ul class="list-unstyled text-start mb-4">
                            {% if plan.limit_condominios %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> {% if plan.slug == 'business' %}Até {{ plan.limit_condominios }} condomínios (sem extras){% else %}{{ plan.limit_condominios }} condomínio(s){% endif %}</li>
                            {% else %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Condomínios ilimitados</li>
                            {% endif %}
                            
                            {% if plan.limit_fracoes %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Até {{ plan.limit_fracoes }} frações</li>
                            {% else %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Frações ilimitadas</li>
                            {% endif %}
                            
                            {% for feature in plan.features %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> {{ feature }}</li>
                            {% endfor %}
                        </ul>

                        {% if plan.slug == 'business' and extra_condominiums_pricing %}
                        <div class="border-top pt-3 mt-3">
                            <h6 class="mb-3 text-start fw-bold">Condomínios Extras</h6>
                            <div class="text-start mb-2">
                                {% for tier in extra_condominiums_pricing %}
                                    {% if tier.is_active %}
                                        <div class="mb-2">
                                            <small class="text-muted">
                                                <i class="bi bi-plus-circle text-success"></i>
                                                {% if tier.max_condominios %}
                                                    <strong>{{ tier.min_condominios }}-{{ tier.max_condominios }} condomínios:</strong> €{{ tier.price_per_condominium|number_format(2, ',', '.') }}/mês cada
                                                {% else %}
                                                    <strong>{{ tier.min_condominios }}+ condomínios:</strong> €{{ tier.price_per_condominium|number_format(2, ',', '.') }}/mês cada
                                                {% endif %}
                                            </small>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-footer bg-white text-center p-4">
                        <a href="{{ BASE_URL }}subscription/choose-plan" class="btn {% if plan.slug == 'pro' %}btn-primary{% elseif plan_promotion %}btn-warning{% else %}btn-outline-primary{% endif %} w-100 btn-lg">
                            Começar
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <p class="text-muted">
                <i class="bi bi-shield-check"></i> Cancele a qualquer momento • 
                <i class="bi bi-credit-card"></i> Sem cartão de crédito necessário
            </p>
        </div>
    </div>
</section>

<!-- CTA Section Final -->
<section class="cta-section">
    <div class="container">
        <div class="text-center">
            <div class="cta-badge">
                <i class="bi bi-shield-lock"></i>
                <span>Comece gratuitamente</span>
            </div>
            <h2 class="cta-title">Pronto para transformar a gestão do seu condomínio?</h2>
            <div class="cta-buttons">
                <a href="{{ BASE_URL }}register" class="btn-cta-primary">
                    <span>Criar Conta Gratuita</span>
                    <i class="bi bi-arrow-right"></i>
                </a>
            </div>
            <p class="cta-note">
                Não precisa de cartão de crédito • Cancele quando quiser
            </p>
        </div>
    </div>
</section>
