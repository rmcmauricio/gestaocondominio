<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        {% if auth_disabled_message %}
        <div class="alert alert-info alert-dismissible fade show mb-4" role="alert" style="border-radius: 0.5rem; border-left: 4px solid #3b82f6;">
            <div class="d-flex align-items-center">
                <i class="bi bi-info-circle me-2" style="font-size: 1.25rem;"></i>
                <div class="flex-grow-1">
                    <strong>Nota:</strong> {{ auth_disabled_message }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
        </div>
        {% endif %}
        <div class="row justify-content-center text-center">
            <div class="col-lg-10">
                <div class="hero-badge-top">
                    <i class="bi bi-shield-lock"></i>
                    <span>A melhor solução para o seu condomínio</span>
                </div>
                <h1 class="hero-title">
                    <span class="title-part-1">Simplifique a gestão do</span>
                    <span class="title-part-2"> condomínio</span>
                </h1>
                <p class="hero-subtitle">
                    Automatize tarefas, melhore a comunicação entre condóminos e administradores, e tenha controlo total das finanças do seu prédio.
                </p>
                
                <div class="hero-features-inline justify-content-center">
                    <div class="hero-feature-item">
                        <div class="hero-feature-icon">
                            <i class="bi bi-graph-up"></i>
                        </div>
                        <span class="hero-feature-text">Gestão financeira completa</span>
                    </div>
                    <div class="hero-feature-item">
                        <div class="hero-feature-icon">
                            <i class="bi bi-chat-dots"></i>
                        </div>
                        <span class="hero-feature-text">Comunicação eficiente</span>
                    </div>
                    <div class="hero-feature-item">
                        <div class="hero-feature-icon">
                            <i class="bi bi-calendar-check"></i>
                        </div>
                        <span class="hero-feature-text">Reservas online</span>
                    </div>
                </div>

                <div class="hero-buttons justify-content-center">
                    {% if not DISABLE_AUTH_REGISTRATION %}
                    <a href="{{ BASE_URL }}register" class="btn-hero-primary">
                        <span>Começar Gratuitamente</span>
                        <i class="bi bi-arrow-right"></i>
                    </a>
                    <a href="{{ BASE_URL }}demo/access" class="btn-hero-secondary">
                        <span>Demonstração</span>
                    </a>
                    {% else %}
                    <a href="{{ BASE_URL }}demo/access" class="btn-hero-primary">
                        <span>Aceder à Demonstração</span>
                        <i class="bi bi-arrow-right"></i>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="absolute bottom-0 left-0 right-0" style="line-height: 0; margin: 0; padding: 0; border: none; outline: none; bottom: -1px;">
        <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-100 h-auto" preserveAspectRatio="none" style="width: 100%; height: auto; display: block; vertical-align: bottom; margin: 0; padding: 0; border: none; outline: none; overflow: visible;">
            <path d="M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1440V121H0V120Z" fill="white" stroke="none" style="shape-rendering: geometricPrecision;"></path>
        </svg>
    </div>
</section>

<!-- Features Section -->
<section id="funcionalidades" class="features-section">
    <div class="container">
        <div class="text-center mb-5">
            <div class="section-label">FUNCIONALIDADES</div>
            <h2 class="section-title">Tudo o que precisa para uma gestão eficiente</h2>
            <p class="section-description">Ferramentas completas para administradores e condóminos</p>
        </div>

        <div class="features-grid">
            <div class="feature-card animate-fade-up" style="animation-delay: 0.1s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-calculator"></i>
                </div>
                <h5 class="feature-card-title">Gestão Financeira</h5>
                <p class="feature-card-description">Controlo completo de receitas, despesas, orçamentos, contas bancárias e movimentos financeiros num único local.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.2s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-receipt-cutoff"></i>
                </div>
                <h5 class="feature-card-title">Recibos Automáticos</h5>
                <p class="feature-card-description">Geração automática de recibos PDF quando as quotas são pagas, com histórico completo e organização por condomínio.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.3s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-calendar-month"></i>
                </div>
                <h5 class="feature-card-title">Quotas e Mapa de Quotas</h5>
                <p class="feature-card-description">Gestão automática de quotas mensais, quotas extras para obras ou eventos especiais, e visualização em mapa completo.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.4s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-chat-dots"></i>
                </div>
                <h5 class="feature-card-title">Mensagens com Editor HTML</h5>
                <p class="feature-card-description">Sistema completo de mensagens com editor HTML rico, respostas, anexos e notificações unificadas para comunicação eficiente.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.5s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-exclamation-triangle"></i>
                </div>
                <h5 class="feature-card-title">Ocorrências</h5>
                <p class="feature-card-description">Registe e acompanhe ocorrências com editor HTML, anexos, comentários e workflow completo de estados e prioridades.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.6s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-bell"></i>
                </div>
                <h5 class="feature-card-title">Notificações Unificadas</h5>
                <p class="feature-card-description">Sistema unificado que integra mensagens, ocorrências e eventos importantes do condomínio em um único local.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.7s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-calendar-check"></i>
                </div>
                <h5 class="feature-card-title">Reserva de Espaços</h5>
                <p class="feature-card-description">Sistema de agendamento online para salão de festas, churrasqueira e outros espaços comuns do condomínio.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.8s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-people"></i>
                </div>
                <h5 class="feature-card-title">Assembleias e Votações</h5>
                <p class="feature-card-description">Convocatórias automáticas, votações online, geração de atas e gestão completa de assembleias de condóminos.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 0.9s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-file-earmark-text"></i>
                </div>
                <h5 class="feature-card-title">Documentos Digitais</h5>
                <p class="feature-card-description">Armazene atas, convenção, regulamentos, contratos e documentos de forma segura, organizados por pasta.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.0s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-building"></i>
                </div>
                <h5 class="feature-card-title">Multi-Condomínios</h5>
                <p class="feature-card-description">Gerir múltiplos condomínios com condomínio padrão e alternância rápida entre eles através do menu lateral.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.1s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-bank"></i>
                </div>
                <h5 class="feature-card-title">Contas Bancárias</h5>
                <p class="feature-card-description">Gestão completa de contas bancárias e caixa, com controlo de saldos, movimentos e reconciliação financeira.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.2s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-truck"></i>
                </div>
                <h5 class="feature-card-title">Fornecedores</h5>
                <p class="feature-card-description">Registo e gestão de fornecedores, contratos, histórico de serviços e avaliações para melhor controlo.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.3s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-graph-up"></i>
                </div>
                <h5 class="feature-card-title">Relatórios Financeiros</h5>
                <p class="feature-card-description">Gere relatórios detalhados de receitas, despesas, balanços e análises financeiras para tomada de decisões.</p>
            </div>

            <div class="feature-card animate-fade-up" style="animation-delay: 1.4s; opacity: 0;">
                <div class="feature-icon">
                    <i class="bi bi-shield-check"></i>
                </div>
                <h5 class="feature-card-title">Segurança e Auditoria</h5>
                <p class="feature-card-description">Dados protegidos com medidas de segurança adequadas, hash seguro de passwords, proteção contra SQL injection, auditoria completa de pagamentos e conformidade com regulamentações.</p>
            </div>
        </div>
    </div>
</section>

<!-- Screenshots Section -->
<section id="screenshots" class="screenshots-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <div class="section-label">PLATAFORMA</div>
            <h2 class="section-title">Veja a plataforma em ação</h2>
            <p class="section-description">Explore a interface intuitiva e as funcionalidades poderosas que simplificam a gestão do seu condomínio</p>
        </div>

        <div class="screenshots-grid">
            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.1s; opacity: 0;" data-screenshot-index="0" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/dashboard.png" data-screenshot-title="Dashboard" data-screenshot-desc="Visão geral completa do condomínio">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/dashboard.png" alt="Dashboard - Visão geral do condomínio" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Dashboard</h5>
                            <p>Visão geral completa do condomínio</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.2s; opacity: 0;" data-screenshot-index="1" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/finances.png" data-screenshot-title="Gestão Financeira" data-screenshot-desc="Controlo completo de receitas e despesas">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/finances.png" alt="Gestão Financeira - Controlo de receitas e despesas" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Gestão Financeira</h5>
                            <p>Controlo completo de receitas e despesas</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.3s; opacity: 0;" data-screenshot-index="2" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/messages.png" data-screenshot-title="Mensagens" data-screenshot-desc="Comunicação eficiente entre condóminos">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/messages.png" alt="Mensagens - Comunicação eficiente" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Mensagens</h5>
                            <p>Comunicação eficiente entre condóminos</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.4s; opacity: 0;" data-screenshot-index="3" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/quotas.png" data-screenshot-title="Mapa de Quotas" data-screenshot-desc="Visualização completa do estado de pagamentos">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/quotas.png" alt="Mapa de Quotas - Visualização completa" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Mapa de Quotas</h5>
                            <p>Visualização completa do estado de pagamentos</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.5s; opacity: 0;" data-screenshot-index="4" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/assemblies.png" data-screenshot-title="Assembleias" data-screenshot-desc="Gestão de votações e convocatórias">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/assemblies.png" alt="Assembleias - Gestão de votações online" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Assembleias</h5>
                            <p>Gestão de votações e convocatórias</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.6s; opacity: 0;" data-screenshot-index="5" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/occurrences.png" data-screenshot-title="Ocorrências" data-screenshot-desc="Registo e acompanhamento de problemas">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/occurrences.png" alt="Ocorrências - Gestão de problemas e manutenções" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Ocorrências</h5>
                            <p>Registo e acompanhamento de problemas</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.7s; opacity: 0;" data-screenshot-index="6" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/reservations.png" data-screenshot-title="Reservas" data-screenshot-desc="Agendamento de espaços comuns">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/reservations.png" alt="Reservas - Agendamento de espaços comuns" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Reservas</h5>
                            <p>Agendamento de espaços comuns</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.8s; opacity: 0;" data-screenshot-index="7" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/documents.png" data-screenshot-title="Documentos" data-screenshot-desc="Armazenamento seguro de atas e documentos">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/documents.png" alt="Documentos - Gestão de atas e documentos" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Documentos</h5>
                            <p>Armazenamento seguro de atas e documentos</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 0.9s; opacity: 0;" data-screenshot-index="8" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/reports.png" data-screenshot-title="Relatórios" data-screenshot-desc="Análises financeiras e balancetes">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/reports.png" alt="Relatórios - Análises financeiras detalhadas" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Relatórios</h5>
                            <p>Análises financeiras e balancetes</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 1.0s; opacity: 0;" data-screenshot-index="9" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/receipts.png" data-screenshot-title="Recibos Automáticos" data-screenshot-desc="Geração automática de recibos PDF">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/receipts.png" alt="Recibos - Geração automática de recibos PDF" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Recibos Automáticos</h5>
                            <p>Geração automática de recibos PDF</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 1.1s; opacity: 0;" data-screenshot-index="10" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/notifications.png" data-screenshot-title="Notificações" data-screenshot-desc="Sistema unificado de notificações">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/notifications.png" alt="Notificações - Sistema unificado" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Notificações</h5>
                            <p>Sistema unificado de notificações</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 1.2s; opacity: 0;" data-screenshot-index="11" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/fractions.png" data-screenshot-title="Frações" data-screenshot-desc="Gestão completa de frações e condóminos">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/fractions.png" alt="Frações - Gestão de frações e condóminos" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Frações</h5>
                            <p>Gestão completa de frações e condóminos</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 1.3s; opacity: 0;" data-screenshot-index="12" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/suppliers.png" data-screenshot-title="Fornecedores" data-screenshot-desc="Gestão de fornecedores e contratos">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/suppliers.png" alt="Fornecedores - Gestão de fornecedores e contratos" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Fornecedores</h5>
                            <p>Gestão de fornecedores e contratos</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 1.4s; opacity: 0;" data-screenshot-index="13" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/bank-accounts.png" data-screenshot-title="Contas Bancárias" data-screenshot-desc="Gestão de contas bancárias e movimentos">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/bank-accounts.png" alt="Contas Bancárias - Gestão de contas e movimentos" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Contas Bancárias</h5>
                            <p>Gestão de contas bancárias e movimentos</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 1.5s; opacity: 0;" data-screenshot-index="14" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/budgets.png" data-screenshot-title="Orçamentos" data-screenshot-desc="Criação e gestão de orçamentos anuais">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/budgets.png" alt="Orçamentos - Criação e gestão de orçamentos" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Orçamentos</h5>
                            <p>Criação e gestão de orçamentos anuais</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="screenshot-item animate-fade-up" style="animation-delay: 1.6s; opacity: 0;" data-screenshot-index="15" data-screenshot-src="{{ BASE_URL }}assets/images/screenshots/votes.png" data-screenshot-title="Votações" data-screenshot-desc="Sistema de votações online para assembleias">
                <div class="screenshot-wrapper" style="cursor: pointer;">
                    <img src="{{ BASE_URL }}assets/images/screenshots/votes.png" alt="Votações - Sistema de votações online" class="screenshot-image" loading="lazy">
                    <div class="screenshot-overlay">
                        <div class="screenshot-info">
                            <h5>Votações</h5>
                            <p>Sistema de votações online para assembleias</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Screenshot Modal -->
<div class="modal fade" id="screenshotModal" tabindex="-1" aria-labelledby="screenshotModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen-lg-down modal-xl modal-dialog-centered">
        <div class="modal-content bg-dark">
            <div class="modal-header border-0">
                <h5 class="modal-title text-white" id="screenshotModalTitle">Dashboard</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body p-0 position-relative">
                <button class="screenshot-nav-btn screenshot-nav-prev" id="screenshotPrevBtn" aria-label="Imagem anterior">
                    <i class="bi bi-chevron-left"></i>
                </button>
                <div class="screenshot-modal-image-container">
                    <img id="screenshotModalImage" src="" alt="" class="screenshot-modal-image">
                    <div class="screenshot-loading-spinner">
                        <div class="spinner-border text-light" role="status">
                            <span class="visually-hidden">A carregar...</span>
                        </div>
                    </div>
                </div>
                <button class="screenshot-nav-btn screenshot-nav-next" id="screenshotNextBtn" aria-label="Próxima imagem">
                    <i class="bi bi-chevron-right"></i>
                </button>
            </div>
            <div class="modal-footer border-0 bg-dark">
                <p class="text-white-50 mb-0 text-center w-100" id="screenshotModalDesc">Visão geral completa do condomínio</p>
                <div class="screenshot-counter text-white-50">
                    <span id="screenshotCurrent">1</span> / <span id="screenshotTotal">16</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Demo Section -->
<section id="demo" class="demo-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="demo-card">
                    <div class="demo-header">
                        <div class="demo-icon-wrapper">
                            <i class="bi bi-rocket-takeoff"></i>
                        </div>
                        <h2 class="demo-title">Experimente a Demo 100% Testável</h2>
                        <p class="demo-description">
                            Explore todas as funcionalidades da plataforma sem criar conta! Solicite acesso e receba um link único por email para testar com dados pré-preenchidos.
                        </p>
                    </div>

                    <div class="demo-stats">
                        <div class="demo-stat-item">
                            <div class="stat-icon">
                                <i class="bi bi-building"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number">10</div>
                                <div class="stat-label">Frações</div>
                                <div class="stat-subtitle">Dados realistas</div>
                            </div>
                        </div>
                        <div class="demo-stat-item">
                            <div class="stat-icon">
                                <i class="bi bi-bank"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number">2</div>
                                <div class="stat-label">Contas</div>
                                <div class="stat-subtitle">Bancárias + Caixa</div>
                            </div>
                        </div>
                        <div class="demo-stat-item">
                            <div class="stat-icon">
                                <i class="bi bi-calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number">{{ "now"|date("Y") }}</div>
                                <div class="stat-label">Ano Completo</div>
                                <div class="stat-subtitle">Dados atualizados</div>
                            </div>
                        </div>
                    </div>

                    <div class="demo-features">
                        <div class="demo-features-title">
                            <i class="bi bi-info-circle"></i>
                            <strong>O que pode testar:</strong>
                        </div>
                        <div class="demo-features-grid">
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Gestão financeira completa</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Recibos automáticos</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Quotas extras e mapa de quotas</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Assembleias com votações online</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Mensagens com editor HTML</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Ocorrências com editor HTML</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Notificações unificadas</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Reservas de espaços comuns</span>
                            </div>
                            <div class="demo-feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span>Documentos e relatórios</span>
                            </div>
                        </div>
                    </div>

                    <div class="demo-cta">
                        <a href="{{ BASE_URL }}demo/access" class="btn-demo-primary">
                            <i class="bi bi-play-circle-fill"></i>
                            <span>Aceder à Demo Agora</span>
                        </a>
                        <p class="demo-note">
                            <i class="bi bi-shield-check"></i>
                            Acesso por link único enviado por email • Sem registo necessário • Dados resetados automaticamente
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section id="como-funciona" class="how-it-works-section">
    <div class="container">
        <div class="text-center mb-5">
            <div class="section-label">COMO FUNCIONA</div>
            <h2 class="section-title">Comece em 3 passos simples</h2>
            <p class="section-description">Configuração rápida e sem complicação</p>
        </div>

        <div class="steps-grid">
            <div class="step-card">
                <div class="step-icon">
                    <i class="bi bi-person-plus"></i>
                </div>
                <div class="step-number">Passo 01</div>
                <h5 class="step-title">Crie a sua conta</h5>
                <p class="step-description">Registe o seu condomínio em poucos minutos. É rápido e gratuito para começar.</p>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="bi bi-gear"></i>
                </div>
                <div class="step-number">Passo 02</div>
                <h5 class="step-title">Configure o seu prédio</h5>
                <p class="step-description">Adicione frações, condóminos e personalize as configurações do sistema.</p>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="bi bi-rocket-takeoff"></i>
                </div>
                <div class="step-number">Passo 03</div>
                <h5 class="step-title">Comece a usar</h5>
                <p class="step-description">Pronto! Gerencie finanças, comunicação e reservas de forma simples e eficiente.</p>
            </div>
        </div>
    </div>
</section>

<!-- Pricing Section -->
<section id="pricing" class="pricing-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Planos para todos os tamanhos</h2>
            <p class="section-description">Escolha o plano ideal para o seu condomínio</p>
        </div>
        
        <div class="row g-4 justify-content-center">
            {% for plan in plans %}
            {% set plan_promotion = plan_promotions[plan.id] ?? null %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-2 {% if plan.slug == 'pro' %}border-primary shadow{% elseif plan_promotion %}border-warning border-3 shadow-lg{% endif %}">
                    {% if plan.slug == 'pro' %}
                    <div class="card-header bg-primary text-white text-center py-3">
                        <span class="badge bg-white fw-bold mb-2 d-inline-block px-3 py-1" style="font-size: 0.9rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); color: #fd7e14 !important;">Mais Popular</span>
                        {% if plan_promotion %}
                        <div class="mt-2">
                            <span class="badge bg-danger text-white mb-2">
                                <i class="bi bi-fire"></i> PROMOÇÃO ATIVA
                            </span>
                            <div class="mt-2">
                                <strong>{{ plan_promotion.name }}</strong>
                                {% if plan_promotion.discount_type == 'percentage' %}
                                    <span class="badge bg-danger">{{ plan_promotion.discount_value }}% OFF</span>
                                {% else %}
                                    <span class="badge bg-danger">€{{ plan_promotion.discount_value }} OFF</span>
                                {% endif %}
                                {% if plan_promotion.duration_months %}
                                    <div class="mt-1">
                                        <small class="text-white-50">Válida por {{ plan_promotion.duration_months }} {% if plan_promotion.duration_months == 1 %}mês{% else %}meses{% endif %}</small>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    {% elseif plan_promotion %}
                    <div class="card-header bg-warning text-dark text-center py-3 position-relative">
                        <span class="badge bg-danger text-white mb-2">
                            <i class="bi bi-fire"></i> PROMOÇÃO ATIVA
                        </span>
                        <div class="mt-2">
                            <strong>{{ plan_promotion.name }}</strong>
                            {% if plan_promotion.discount_type == 'percentage' %}
                                <span class="badge bg-danger">{{ plan_promotion.discount_value }}% OFF</span>
                            {% else %}
                                <span class="badge bg-danger">€{{ plan_promotion.discount_value }} OFF</span>
                            {% endif %}
                            {% if plan_promotion.duration_months %}
                                <div class="mt-1">
                                    <small class="text-dark">Válida por {{ plan_promotion.duration_months }} {% if plan_promotion.duration_months == 1 %}mês{% else %}meses{% endif %}</small>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                    <div class="card-body text-center p-4">
                        <h3 class="fw-bold mb-3">{{ plan.name }}</h3>
                        <div class="mb-4">
                            {% if plan_promotion %}
                                {% set discount_amount = (plan_promotion.discount_type == 'percentage') ? (plan.price_monthly * plan_promotion.discount_value / 100) : plan_promotion.discount_value %}
                                {% set final_price = plan.price_monthly - discount_amount %}
                                <div>
                                    <span class="text-muted text-decoration-line-through" style="font-size: 1.5rem;">€{{ plan.price_monthly|number_format(2, ',', '.') }}</span>
                                    <span class="display-3 fw-bold text-danger">€{{ final_price|number_format(2, ',', '.') }}</span>
                                </div>
                            {% else %}
                                <span class="display-3 fw-bold">€{{ plan.price_monthly|number_format(2, ',', '.') }}</span>
                            {% endif %}
                            <span class="text-muted">/mês</span>
                        </div>
                        {% if plan.price_yearly %}
                        <p class="text-muted small mb-4">
                            ou €{{ plan.price_yearly|number_format(2, ',', '.') }}/ano<br>
                            <span class="text-success">Poupe {{ ((plan.price_monthly * 12 - plan.price_yearly) / (plan.price_monthly * 12) * 100)|round }}%</span>
                        </p>
                        {% endif %}
                        
                        <p class="text-muted mb-4">{{ plan.description }}</p>
                        
                        {% if plan.plan_type %}
                        <!-- License-based plan information -->
                        <div class="border-top border-bottom py-3 mb-4">
                            {% if plan.license_min %}
                            <div class="mb-3">
                                <small class="text-muted d-block mb-1">
                                    <i class="bi bi-key"></i> <strong>Frações Incluídas:</strong>
                                </small>
                                <span class="h4 text-primary">{{ plan.license_min }}</span>
                                <span class="text-muted small"> frações</span>
                            </div>
                            {% endif %}
                            
                            {% if plan_pricing_tiers[plan.id] is defined and plan_pricing_tiers[plan.id]|length > 0 %}
                            <div class="mt-3">
                                <small class="text-muted d-block mb-2 fw-bold">
                                    <i class="bi bi-calculator"></i> Preços por Fração Extra:
                                </small>
                                <div class="small">
                                    {% for tier in plan_pricing_tiers[plan.id] %}
                                    {% if tier.is_active %}
                                    <div class="mb-1">
                                        <span class="text-muted">
                                            {% if tier.max_licenses %}
                                                {{ tier.min_licenses }}-{{ tier.max_licenses }} frações:
                                            {% else %}
                                                {{ tier.min_licenses }}+ frações:
                                            {% endif %}
                                        </span>
                                        <strong class="text-success ms-1">€{{ tier.price_per_license|number_format(2, ',', '.') }}/fração</strong>
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                                <small class="text-muted d-block mt-2">
                                    <i class="bi bi-info-circle"></i> Preços mensais por fração extra
                                </small>
                            </div>
                            {% endif %}
                        </div>
                        {% endif %}
                        
                        <ul class="list-unstyled text-start mb-4">
                            {% if plan.limit_condominios %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> {% if plan.slug == 'business' %}Até {{ plan.limit_condominios }} condomínios (sem extras){% else %}{{ plan.limit_condominios }} condomínio(s){% endif %}</li>
                            {% else %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Condomínios ilimitados</li>
                            {% endif %}
                            
                            {% if plan.limit_fracoes %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Até {{ plan.limit_fracoes }} frações</li>
                            {% else %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Frações ilimitadas</li>
                            {% endif %}
                            
                            {% for feature in plan.features %}
                            <li class="mb-2"><i class="bi bi-check-circle text-success"></i> {{ feature }}</li>
                            {% endfor %}
                        </ul>

                        {% if plan.slug == 'business' and extra_condominiums_pricing %}
                        <div class="border-top pt-3 mt-3">
                            <h6 class="mb-3 text-start fw-bold">Condomínios Extras</h6>
                            <div class="text-start mb-2">
                                {% for tier in extra_condominiums_pricing %}
                                    {% if tier.is_active %}
                                        <div class="mb-2">
                                            <small class="text-muted">
                                                <i class="bi bi-plus-circle text-success"></i>
                                                {% if tier.max_condominios %}
                                                    <strong>{{ tier.min_condominios }}-{{ tier.max_condominios }} condomínios:</strong> €{{ tier.price_per_condominium|number_format(2, ',', '.') }}/mês cada
                                                {% else %}
                                                    <strong>{{ tier.min_condominios }}+ condomínios:</strong> €{{ tier.price_per_condominium|number_format(2, ',', '.') }}/mês cada
                                                {% endif %}
                                            </small>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-footer bg-white text-center p-4">
                        <a href="{{ BASE_URL }}subscription/choose-plan" class="btn {% if plan.slug == 'pro' %}btn-primary{% elseif plan_promotion %}btn-warning{% else %}btn-outline-primary{% endif %} w-100 btn-lg">
                            Começar
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <p class="text-muted">
                <i class="bi bi-shield-check"></i> Cancele a qualquer momento • 
                <i class="bi bi-credit-card"></i> Sem cartão de crédito necessário
            </p>
        </div>
    </div>
</section>

<!-- CTA Section Final -->
<section class="cta-section">
    <div class="container">
        <div class="text-center">
            <div class="cta-badge">
                <i class="bi bi-shield-lock"></i>
                <span>Comece gratuitamente</span>
            </div>
            <h2 class="cta-title">Pronto para transformar a gestão do seu condomínio?</h2>
            <div class="cta-buttons">
                {% if not DISABLE_AUTH_REGISTRATION %}
                <a href="{{ BASE_URL }}register" class="btn-cta-primary">
                    <span>Criar Conta Gratuita</span>
                    <i class="bi bi-arrow-right"></i>
                </a>
                {% else %}
                <a href="{{ BASE_URL }}demo/access" class="btn-cta-primary">
                    <span>Aceder à Demonstração</span>
                    <i class="bi bi-arrow-right"></i>
                </a>
                {% endif %}
            </div>
            <p class="cta-note">
                Não precisa de cartão de crédito • Cancele quando quiser
            </p>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const screenshotItems = document.querySelectorAll('.screenshot-item');
    const screenshotModal = new bootstrap.Modal(document.getElementById('screenshotModal'));
    const modalImage = document.getElementById('screenshotModalImage');
    const modalTitle = document.getElementById('screenshotModalTitle');
    const modalDesc = document.getElementById('screenshotModalDesc');
    const currentCounter = document.getElementById('screenshotCurrent');
    const totalCounter = document.getElementById('screenshotTotal');
    const prevBtn = document.getElementById('screenshotPrevBtn');
    const nextBtn = document.getElementById('screenshotNextBtn');
    const loadingSpinner = document.querySelector('.screenshot-loading-spinner');
    
    let currentIndex = 0;
    const totalScreenshots = screenshotItems.length;
    totalCounter.textContent = totalScreenshots;
    
    // Função para carregar imagem no modal
    function loadScreenshot(index) {
        if (index < 0 || index >= totalScreenshots) return;
        
        const item = screenshotItems[index];
        const src = item.dataset.screenshotSrc;
        const title = item.dataset.screenshotTitle;
        const desc = item.dataset.screenshotDesc;
        
        currentIndex = index;
        currentCounter.textContent = index + 1;
        
        // Mostrar loading
        loadingSpinner.style.display = 'flex';
        modalImage.style.opacity = '0';
        
        // Atualizar título e descrição
        modalTitle.textContent = title;
        modalDesc.textContent = desc;
        
        // Carregar imagem
        const img = new Image();
        img.onload = function() {
            modalImage.src = src;
            modalImage.alt = title;
            modalImage.style.opacity = '1';
            loadingSpinner.style.display = 'none';
        };
        img.onerror = function() {
            loadingSpinner.style.display = 'none';
            modalImage.src = '';
            modalImage.alt = 'Imagem não encontrada';
        };
        img.src = src;
        
        // Atualizar estado dos botões
        prevBtn.disabled = index === 0;
        nextBtn.disabled = index === totalScreenshots - 1;
    }
    
    // Abrir modal ao clicar em um screenshot
    screenshotItems.forEach((item, index) => {
        item.addEventListener('click', function() {
            loadScreenshot(index);
            screenshotModal.show();
        });
    });
    
    // Navegação anterior
    prevBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        if (currentIndex > 0) {
            loadScreenshot(currentIndex - 1);
        }
    });
    
    // Navegação próxima
    nextBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        if (currentIndex < totalScreenshots - 1) {
            loadScreenshot(currentIndex + 1);
        }
    });
    
    // Navegação por teclado
    document.addEventListener('keydown', function(e) {
        if (!screenshotModal._element.classList.contains('show')) return;
        
        if (e.key === 'ArrowLeft' && currentIndex > 0) {
            e.preventDefault();
            loadScreenshot(currentIndex - 1);
        } else if (e.key === 'ArrowRight' && currentIndex < totalScreenshots - 1) {
            e.preventDefault();
            loadScreenshot(currentIndex + 1);
        } else if (e.key === 'Escape') {
            screenshotModal.hide();
        }
    });
    
    // Reset ao fechar o modal
    screenshotModal._element.addEventListener('hidden.bs.modal', function() {
        modalImage.src = '';
        currentIndex = 0;
    });
});
</script>

{# Modal para fase de testes / users piloto #}
{% if is_registration_disabled|default(false) %}
<div class="modal fade" id="pilotSignupModal" tabindex="-1" aria-labelledby="pilotSignupModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header border-0 pb-2" style="background: linear-gradient(135deg, #e07920 0%, #c7650e 100%); color: white;">
                <h5 class="modal-title d-flex align-items-center gap-2" id="pilotSignupModalLabel">
                    <i class="bi bi-code-slash" style="font-size: 1.5rem;"></i>
                    <span>Aplicação em Fase de Testes</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body pt-4">
                {% if pilot_signup_error %}
                <div class="alert alert-danger alert-dismissible fade show d-flex align-items-center gap-2" role="alert">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    <div class="flex-grow-1">{{ pilot_signup_error }}</div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endif %}

                {% if pilot_signup_success %}
                <div class="alert alert-success alert-dismissible fade show d-flex align-items-center gap-2" role="alert">
                    <i class="bi bi-check-circle-fill"></i>
                    <div class="flex-grow-1">{{ pilot_signup_success }}</div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endif %}

                <div class="text-center mb-4">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #e07920 0%, #c7650e 100%); box-shadow: 0 8px 25px rgba(224, 121, 32, 0.5);">
                        <i class="bi bi-lightbulb text-white" style="font-size: 2.5rem;"></i>
                    </div>
                </div>
                
                <div class="mb-4">
                    <p class="d-flex align-items-start gap-2 mb-3">
                        <i class="bi bi-info-circle-fill text-primary mt-1" style="font-size: 1.2rem;"></i>
                        <span>A nossa aplicação encontra-se ainda em fase de testes.</span>
                    </p>
                    <p class="d-flex align-items-start gap-2 mb-3">
                        <i class="bi bi-envelope-heart-fill text-danger mt-1" style="font-size: 1.2rem;"></i>
                        <span>Se tiver interesse em participar como utilizador piloto e ajudar-nos a melhorar o sistema, deixe-nos o seu email e entraremos em contacto em breve.</span>
                    </p>
                    <div class="alert alert-warning d-flex align-items-start gap-2 mb-0" role="alert">
                        <i class="bi bi-star-fill text-warning mt-1" style="font-size: 1.2rem;"></i>
                        <div>
                            <strong>Ao participar na fase de testes, será um utilizador pioneiro beneficiando de descontos no lançamento.</strong>
                        </div>
                    </div>
                </div>
                
                <form id="pilotSignupForm" method="POST" action="{{ BASE_URL }}pilot/signup">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                    <input type="hidden" name="source" value="homepage">
                    <div class="mb-3">
                        <label for="pilot_email" class="form-label d-flex align-items-center gap-2">
                            <i class="bi bi-envelope"></i>
                            <span>Email</span>
                        </label>
                        <input type="email" class="form-control form-control-lg" id="pilot_email" name="email" placeholder="seu@email.com" required>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg d-flex align-items-center justify-content-center gap-2">
                            <i class="bi bi-send-fill"></i>
                            <span>Inscrever-me</span>
                        </button>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-0 pt-2">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-lg me-1"></i>
                    Fechar
                </button>
            </div>
        </div>
    </div>
</div>
{% endif %}
